"use strict";(self.webpackChunkfreshcart=self.webpackChunkfreshcart||[]).push([[932],{6666:(L,g,r)=>{r.r(g),r.d(g,{LoginComponent:()=>A});var _=r(6814),l=r(95),u=r(1120),t=r(4769),d=r(304);function p(e,a){1&e&&(t.TgZ(0,"li",17),t._uU(1," email is required "),t.qZA())}function c(e,a){1&e&&(t.TgZ(0,"li",18),t._uU(1," Ex: basma@gamil.com "),t.qZA())}function f(e,a){if(1&e&&(t.TgZ(0,"div",14)(1,"ul"),t.YNc(2,p,2,0,"li",15),t.YNc(3,c,2,0,"li",16),t.qZA()()),2&e){const n=t.oxw();let i,o;t.xp6(2),t.Q6J("ngIf",null==(i=n.loginForm.get("email"))?null:i.getError("required")),t.xp6(1),t.Q6J("ngIf",null==(o=n.loginForm.get("email"))?null:o.getError("email"))}}function h(e,a){1&e&&(t.TgZ(0,"li",17),t._uU(1," password is required "),t.qZA())}function Z(e,a){1&e&&(t.TgZ(0,"li",17),t._uU(1," must be at least 6 char "),t.qZA())}function v(e,a){if(1&e&&(t.TgZ(0,"div",14)(1,"ul"),t.YNc(2,h,2,0,"li",15),t.YNc(3,Z,2,0,"li",15),t.qZA()()),2&e){const n=t.oxw();let i,o;t.xp6(2),t.Q6J("ngIf",null==(i=n.loginForm.get("password"))?null:i.getError("required")),t.xp6(1),t.Q6J("ngIf",null==(o=n.loginForm.get("password"))?null:o.getError("pattern"))}}function T(e,a){1&e&&(t.TgZ(0,"span"),t._UZ(1,"i",19),t.qZA())}function x(e,a){if(1&e&&(t.TgZ(0,"div",20)(1,"ul")(2,"li",21),t._uU(3),t.qZA()()()),2&e){const n=t.oxw();t.xp6(3),t.Oqu(n.errMsg)}}let A=(()=>{class e{constructor(n,i,o){this._AuthService=n,this._Router=i,this._FormBuilder=o,this.errMsg="",this.isLoadind=!1,this.loginForm=this._FormBuilder.group({email:["",[l.kI.required,l.kI.email]],password:["",[l.kI.required,l.kI.pattern(/^[a-zA-Z0-9_@]{6,}$/)]]})}handleForm(){const n=this.loginForm.value;this.isLoadind=!0,!0===this.loginForm.valid&&this._AuthService.login(n).subscribe({next:i=>{"success"===i.message&&(localStorage.setItem("eToken",i.token),this._AuthService.decodeUser(),this.isLoadind=!1,this._Router.navigate(["/home"]))},error:i=>{this.errMsg=i.error.message,this.isLoadind=!1}})}static#t=this.\u0275fac=function(i){return new(i||e)(t.Y36(d.e),t.Y36(u.F0),t.Y36(l.qu))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-login"]],standalone:!0,features:[t.jDz],decls:21,vars:6,consts:[[1,"w-75","mx-auto","shadow","rounded","p-4","my-3","bg-main-light"],[1,"text-capitalize","my-3"],[3,"formGroup","ngSubmit"],[1,"form-item"],["for","email",1,"text-capitalize"],["formControlName","email","id","email","type","email",1,"form-control"],["class","alert alert-danger my-1 font-sm pb-1 mt-0",4,"ngIf"],["for","password",1,"text-capitalize"],["formControlName","password","id","password","type","password",1,"form-control"],[1,"d-flex","justify-content-between","align-items-center"],["routerLink","/forget",1,"main-btn","text-capitalize","mt-3"],[1,"text-capitalize","main-btn","mt-3","d-block",3,"disabled"],[4,"ngIf"],["class","alert alert-danger my-2 pt-2 pb-0",4,"ngIf"],[1,"alert","alert-danger","my-1","font-sm","pb-1","mt-0"],["class","text-capitalize fw-bold",4,"ngIf"],["class","fw-bold",4,"ngIf"],[1,"text-capitalize","fw-bold"],[1,"fw-bold"],[1,"fa-solid","fa-spinner","fa-spin"],[1,"alert","alert-danger","my-2","pt-2","pb-0"],[1,"font-sm","fw-bold"]],template:function(i,o){if(1&i&&(t.TgZ(0,"section",0)(1,"h1",1),t._uU(2,"login now"),t.qZA(),t.TgZ(3,"form",2),t.NdJ("ngSubmit",function(){return o.handleForm()}),t.TgZ(4,"div",3)(5,"label",4),t._uU(6,"email"),t.qZA(),t._UZ(7,"input",5),t.YNc(8,f,4,2,"div",6),t.qZA(),t.TgZ(9,"div",3)(10,"label",7),t._uU(11,"password"),t.qZA(),t._UZ(12,"input",8),t.YNc(13,v,4,2,"div",6),t.qZA(),t.TgZ(14,"div",9)(15,"button",10),t._uU(16," forgot password "),t.qZA(),t.TgZ(17,"button",11),t._uU(18," login "),t.YNc(19,T,2,0,"span",12),t.qZA()()(),t.YNc(20,x,4,1,"div",13),t.qZA()),2&i){let s,m;t.xp6(3),t.Q6J("formGroup",o.loginForm),t.xp6(5),t.Q6J("ngIf",(null==(s=o.loginForm.get("email"))?null:s.touched)&&(null==(s=o.loginForm.get("email"))?null:s.errors)),t.xp6(5),t.Q6J("ngIf",(null==(m=o.loginForm.get("password"))?null:m.touched)&&(null==(m=o.loginForm.get("password"))?null:m.errors)),t.xp6(4),t.Q6J("disabled",o.loginForm.invalid),t.xp6(2),t.Q6J("ngIf",o.isLoadind),t.xp6(1),t.Q6J("ngIf",o.errMsg)}},dependencies:[_.ez,_.O5,l.UX,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,u.rH]})}return e})()}}]);